!function(t){function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=45)}({15:function(t,n,e){"use strict";function o(t,n){this.callback=t||function(){},this.serverHost=location.host,this.connect()}Object.defineProperty(n,"__esModule",{value:!0}),o.sockets={},o.prototype.connect=function(){this.startNative()},o.prototype.startNative=function(){var t=this,n=void 0!==window.g_ws_params?window.g_ws_params:{},e=void 0!==window.u?{h:u}:{},o=this.getUrl(Object.assign(n,e));window.socketInited=!0;var r="https:"===location.protocol?"wss://":"ws://";this.ws=new WebSocket(r+t.serverHost+"/?"+o),this.ws.onopen=function(n){t.interval&&clearInterval(t.interval),t.interval=setInterval(function(){t.ws.send(JSON.stringify({action:"ping"}))},15e3)},this.ws.onmessage=function(n){var e=JSON.parse(n.data);"pong"===e.action||("start_game"===e.action?void 0!==e.game_id&&e.tournament_id?"undefined"==typeof g?location.href="/tournament/"+e.tournament_id+"/game/"+e.game_id:isNaN(parseInt(g))||g==e.game_id||(location.href="/tournament/"+e.tournament_id+"/game/"+e.game_id):void 0===e.game_id||e.tournament_id||("undefined"==typeof g?location.href="/play/game/"+e.game_id:isNaN(parseInt(g))||g==e.game_id||(location.href="/play/game/"+e.game_id)):t.onMessage(e,t))},this.ws.onclose=function(n){t.stop(),console.log("WS CLOSED. RECONNECT IN 1 SECS"),setTimeout(function(){t.startNative()},1e3)},this.ws.onerror=function(){console.error("Не могу подключиться к нативным вебсокетам")}},o.prototype.getUrl=function(t){var n="";for(var e in t)""!=n&&(n+="&"),n+=e+"="+encodeURIComponent(t[e]);return n},o.prototype.onMessage=function(t,n){n.callback(t)},o.prototype.stop=function(t){var n=t||this.socket||this.ws;this.socket?n.disconnect():n.close();for(var t in o.sockets)o.sockets[t]===n&&delete o.sockets[t]},o.prototype.stopAll=function(){for(var t in o.sockets)this.stop(o.sockets[t]);return!0},o.prototype.showSonnections=function(){for(var t in o.sockets)console.log(t,o.sockets[t]);return!0},n.default=o},45:function(t,n,e){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),i=e(15),s=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){function t(){o(this,t),void 0===window.socketInited&&(this.socket=new s.default(function(){},location.host))}return r(t,[{key:"getUrl",value:function(t){var n="";for(var e in t)""!=n&&(n+="&"),n+=e+"="+encodeURIComponent(t[e]);return n}}]),t}();$(function(){new a})}});